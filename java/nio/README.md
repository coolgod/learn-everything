Based on:
https://github.com/jjenkov/java-nio-server

But fixed many bugs and refactored for easier understanding